### 2. **Linux文件系统与目录结构**

在Linux中，文件系统**是组织和存储文件的方式**。**它管理着文件和目录的层次结构**，让我们能够**高效地访问和操作数据。**

#### 2.1 **Linux的文件系统结构**

Linux的文件系统结构是以**根目录（/）**为基础，形成一个树状结构。从根目录开始，**所有文件和目录都挂载在它下面，形成一个统一的目录树**。与Windows中的驱动器字母（如C:、D:）不同，Linux使用单一的根目录来表示整个系统的文件结构。

下面是常见的几个Linux目录及其功能：

- **/**（根目录）：这是整个文件系统的顶级目录，所有文件和目录都挂载在这个目录下。

- **/home**：存放所有普通用户的家目录。每个用户都有一个以用户名命名的目录。例如，用户`nicholas`的家目录是`/home/nicholas`。所有用户的数据和配置文件通常都存放在这里。

  除了用户名，Linux中的每个用户都还有一个**唯一的用户ID（UID）**。用户ID用于标识用户，除了用户名以外，UID也是操作系统用来识别用户的关键标识。

  - **用户名**是可读的标识符（如`nicholas`）。
  - **UID**是系统内部使用的数字标识符，例如，`nicholas`用户可能会有UID`1001`。

  同样，**组**也有一个唯一的组ID（GID）。用户的组名对应着一个GID，系统通过GID来管理组权限。）

- **家目录是什么意思？**

  家目录（Home Directory）是每个用户在Linux系统中专属的存储空间，通常存放该用户的个人文件、配置文件和数据。每个用户在Linux系统中都有一个家目录，默认情况下，它位于`/home/username`，其中`username`是用户的名字。

  例如，`nicholas`用户的家目录通常是`/home/nicholas`，你可以在该目录中保存文件、安装应用程序、存储配置等。

- **/etc**：这个目录包含了所有**系统级别的配置文件**。系统服务和应用程序的配置文件都在这里。例如，`/etc/passwd`存储着用户账户信息，`/etc/fstab`存储着磁盘挂载信息。

- **/usr**：包含了系统级的应用程序和库文件。与`/bin`目录不同，`/usr`目录中的文件是供  **所有用户**  使用的程序和库。`/usr/bin`存放了大部分的用户命令，`/usr/lib`存放了程序库文件。

- **/bin**：包含了启动和修复系统时必需的核心命令。**这里的文件通常是系统维护所必需的**，几乎所有Linux系统都会有这个目录。比如，`ls`、`cp`等常用命令就在这里。

- **/var**：包含了可变数据文件，**通常是运行时产生**的文件。例如，`/var/log`存放系统日志文件，`/var/spool`存放打印队列和邮件队列。

- **/tmp**：**临时文件目录**，用于存放应用程序和系统运行时创建的临时文件。通常，这些文件在系统**重启后会被删除。**

- **/dev**：**包含了设备文件**，表示硬件设备。所有硬件设备都以文件形式显示在这个目录下，如硬盘、终端设备、USB设备等。比如，`/dev/sda`是第一个SATA硬盘。

- **/lib**：包含系统所需的共享库文件，**这些文件是程序运行时需要的**。通常，系统的可执行文件依赖于这个目录中的库文件。

- **/mnt**：**挂载点目录**，用于临时挂载外部设备（如USB硬盘）。例如，当你插入U盘时，它会被挂载到`/mnt/usb`目录下。

- **/opt**：**包含可选的应用程序软件包**。例如，安装的第三方软件可能会被放置在这个目录下。

- **/root**：这是超级用户（root）的家目录。和普通用户不同，root用户的家目录存放在`/root`而不是`/home`目录下。

#### 2.2 **文件权限**

核心思想：**一切皆文件（Everything is a file）**

在 Linux 中：

- 目录是文件
- 设备（如硬盘、键盘）是文件
- 进程信息是文件（`/proc`）
- 网络套接字也可以看作文件

因此，**权限模型围绕“文件”展开**，非常统一。

Linux采用**权限系统来保护文件和目录**，**以便只允许授权用户执行特定操作**（linux的这套规则比windows的要简单）。每个文件和目录都有**读（r）**、**写（w）**和**执行（x）**权限。

- **读（r）**：允许读取文件内容。
- **写（w）**：允许修改文件内容。
- **执行（x）**：允许执行文件（如果文件是可执行文件）。

##### 2.2.1 **权限表示**

文件和目录的权限通常以**rwx**的形式表示。每个文件或目录都有**三类用户权限**：

- **用户（User）**：文件的拥有者。
- **组（Group）**：与文件拥有者属于同一组的用户。
- **其他（Others）**：不属于文件拥有者和所属组的用户。

例如，文件权限`-rwxr-xr--`表示(以  -  开头，然后三个字符一组的看)：

- 用户权限：`rwx`（可读、可写、可执行）
- 组权限：`r-x`（可读、可执行）
- 其他用户权限：`r--`（可读）

##### 2.2.2 **修改权限**

1. **chmod**：修改文件或目录的权限。
   1. 使用数字方式：
   
     **r = 4（读权限）**，**w = 2（写权限）**，**x = 1（执行权限）**
   
     每个用户的权限是这三个数字的和，如：
   
     **7**（4+2+1）：读、写、执行权限
   
     **6**（4+2）：读、写权限
   
     **5**（4+1）：读、执行权限
   
     **4**：只读权限
   
     例如：`chmod 755 file.txt`：设置**用户**（7）为可读、可写、可执行，**组和其他**（5）为可读、可执行。也就是说，他能分别设置用户，组，其他这三类权限
   2. 使用符号方式：
     - `+`：添加权限，`-`：删除权限，`=`：设置精确权限。
     - 例如：
       - `chmod u+x file.txt`：给文件的**用户**（u）增加**执行**权限（u标识用户，x就是执行权限）。
       - `chmod g-w file.txt`：给文件的**组**（g）去掉**写**权限。
       - `chmod o=r file.txt`：将**其他用户**（o）的权限设置为**只读**。
   
2. **chown**：改变文件或目录的**所有者**和**所属组**。
   
   格式：`chown user:group file`
   
   - `user`：新的文件所有者
   - `group`：新的文件所属组
   - `file`：文件或目录名
   
   - 例如：
     - `chown john:admin file.txt`：将`file.txt`的所有者更改为`john`，并将所属组更改为`admin`。
     - `chown john file.txt`：只更改文件的所有者为`john`，不改变组。
     - `chown :admin file.txt`：只更改文件的所属组为`admin`，不改变所有者。
   
3. **chgrp**：改变文件或目录的所属组。

   - 用来改变文件或目录的**所属组**。

     格式：`chgrp group file`

     例如：

     - `chgrp admin file.txt`：将`file.txt`的所属组更改为`admin`。

#### 2.3 **常用文件管理命令**

Linux系统中的文件管理主要通过命令行进行，下面是一些常见的文件管理命令：

- **ls**：列出目录内容。
  - `ls -l`：列出详细信息，包括权限、所有者、文件大小等。
  - `ls -a`：显示包括隐藏文件（以`.`开头的文件）。
- **cp**：复制文件或目录。
  - `cp file1.txt file2.txt`：将`file1.txt`复制为`file2.txt`。
  - `cp -r dir1/ dir2/`：递归复制目录。
- **mv**：移动或重命名文件或目录。
  - `mv file1.txt file2.txt`：将`file1.txt`重命名为`file2.txt`。
  - `mv file1.txt /home/user/`：将`file1.txt`移动到`/home/user/`目录。
- **rm**：删除文件或目录。
  - `rm file1.txt`：删除`file1.txt`文件。
  - `rm -r dir1/`：递归删除目录`dir1`及其内容。
- **mkdir**：创建目录。
  - `mkdir dir1`：创建一个名为`dir1`的目录。
  - `mkdir -p dir1/subdir`：创建目录及其父目录（如果父目录不存在）。
- **touch**：创建空文件或更新文件的修改时间。
  - `touch file1.txt`：如果文件不存在，创建一个空文件；如果文件已存在，更新其修改时间。

当然，还有很多命令，我们可以查阅手册，用到的时候再查阅，另外：你可以使用`man`命令查看详细的命令帮助。例如，查看`ls`命令的手册：

```bash
man ls
```

并且：很多Linux命令都支持额外的参数，通常以**`-`**开头。你可以通过`man`命令查看每个命令的所有参数，这也就是：**命令行中的参数**

很多Linux命令都支持额外的参数，通常以**`-`**开头。你可以通过`man`命令查看每个命令的所有参数。

例如，`ls`命令的常见参数：

- `-l`：显示详细信息（如文件权限、所有者、大小等）
- `-a`：显示所有文件（包括隐藏文件）
- `-h`：以可读性更强的格式显示文件大小（如KB, MB）
- `-R`：递归显示目录内容

要查看所有`ls`命令的参数：

```
man ls
```

你可以在每个命令的`man`页中找到支持的所有参数及其作用。例如：

```
man ls
```

显示的是`ls`命令的完整手册，其中会列出所有可用的参数。
# 一、Node.js 演示大纲（覆盖我们之前所有的知识点）

## A. 进程相关（Process）

1. **查看当前 Node.js 进程信息**
   - `process.pid`
   - `process.ppid`
   - `process.cwd()`
   - `process.memoryUsage()`
2. **演示父进程与子进程关系（使用 child_process.spawn）**
   - 创建一个子进程执行 `ls` / `dir`
   - 查看子进程的 `pid` 与父进程 `pid`
3. **演示 Node.js 创建 Node 子进程（使用 child_process.fork）**
   - 父进程启动子进程
   - 父子进程之间进行 `IPC message` 通信
4. **演示子进程为何是“独立进程”**
   - 父子进程分别打印自己的内存使用
   - 改变其中一个进程的全局变量，不影响另一个

------

## B. 多进程并行计算（充分利用多核 CPU）

1. **使用 child_process.fork 执行 CPU 密集计算（如斐波那契）**
   - 主进程响应不被阻塞
   - 多个进程可跑在不同 CPU 核上
2. **使用 cluster 模块开启多核 Node.js 服务**
   - 自动分配 CPU 核数
   - 子进程崩溃自动重启

------

## C. 线程相关（Thread）

1. **演示 Node.js Worker Threads（多线程）**
   - 创建一个 Worker 线程执行 CPU 密集任务
   - 主线程保持流畅，不被阻塞
2. **演示 Worker Threads 与主线程通信**
   - message 通信
   - 共享内存（SharedArrayBuffer）
3. **演示 Worker 与子进程的区别（对比版）**
   - 子进程：独立进程，独立内存
   - Worker：同一进程，共享内存

------

## D. Node.js 内置 libuv 线程池

1. **演示 crypto.pbkdf2 使用 libuv 线程池**
   - 让 Node.js 底层自动使用多个线程
   - 查看 threadpoolSize 调整后的效果
2. **演示 fs I/O 也使用线程池**
   - 同时读取多个大文件并观察线程池行为

------

## E. 宿主操作系统层面的知识

1. **可视化进程树（Linux/macOS）**
   - `pstree -p`
   - 展示父进程、子进程关系

------

# 二、演示输出形式说明

每一条演示都包含：

1. **代码文件名**
2. **运行方式（node xxxx.js）**
3. **期望输出（示例）**
4. **背后原理解释**

让你无需额外推理即可理解。